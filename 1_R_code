# my first code in R for remote sensing

# install.packages("raster")
# The raster package can create, read, manipulate, and write raster data
library(raster)

# setting working directory in MacOS
setwd("~/Desktop/lab")

# import the first image
# brick funtion creates a multi-layer raster object
# i am using the brick function to import a satellite image

l2011 <- brick("p224r63_2011.grd")
l2011

# in the image p224r63_2011.grd, p224 stands for path 224 of the Landsat satellite ; r63 stands for row in the planisphere in the following link
# https://gisgeography.com/wp-content/uploads/2016/01/World-Referencing-System.png

# plot the image
plot(l2011)

# https://www.r-graph-gallery.com/42-colors-names.html color names to use as arguments
# customize color palette to make the plot more visible
cl <- colorRampPalette(c("black", "grey", "light grey")) (100) 
# col is a parameter in the plot function to work on the colours
plot(l2011, col=cl)

# Clarifying Landsat bands 
# b1 = blue
# b2 = green
# b3 = red
# b4 = near infra red NIR
# b5 = middle infra red 
# b6 = thermal infra red
# b7 = second sensor for middle infrared

# to close and definitively clean the specified plot use dev.off() 
dev.off()

# plot now just the blue band - B1_sre
plot(l2011$B1_sre)
# or
plot(l2011[[1]])

plot(l2011$B1_sre) 
cl <- colorRampPalette(c("black", "grey", "light grey")) (100)
plot(l2011$B1_sre, col=cl) 

# plot b1 from dark blue to blue to light blue
clb <- colorRampPalette(c("dark blue", "blue", "light blue")) (100)
plot(l2011$B1_sre, col=clb) 

# export pdf image to lab folder
pdf("banda1.pdf")
plot(l2011$B1_sre, col=clb) 

# export png
png("banda1.png")
plot(l2011$B1_sre, col=clb) 
dev.off()

# plot b2 from dark green to green to light green
clg <- colorRampPalette(c("dark green", "green", "light green")) (100)
plot(l2011$B2_sre, col=clg) 

# par function allows to set specific multi frame graphics
# with the par funtion i can plot two or more specific bands/images side by side, in raws and columns
par(mfrow=c(1,2))
plot(l2011$B1_sre, col=clb) 
plot(l2011$B2_sre, col=clg) 
dev.off()

# export multiframe plot
pdf("multiframe.pdf")
par(mfrow=c(1,2))
plot(l2011$B1_sre, col=clb) 
plot(l2011$B2_sre, col=clg) 
dev.off()

# exercise: revert the multiframe
par(mfrow=c(2,1))
plot(l2011$B1_sre, col=clb) 
plot(l2011$B2_sre, col=clg) 

# let's plot the first four bands
par(mfrow=c(2,2))
# blue
plot(l2011$B1_sre, col=clb) 
# green
plot(l2011$B2_sre, col=clg) 
# red
clr <- colorRampPalette(c("dark red", "red", "pink")) (100)
plot(l2011$B3_sre, col=clr)
# NIR
clnir <- colorRampPalette(c("red", "orange", "yellow")) (100)
plot(l2011$B4_sre, col=clnir)

## DAY 3 ##

